(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{607:function(e,t,s){Promise.resolve().then(s.bind(s,3211))},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},3211:function(e,t,s){"use strict";s.r(t),s.d(t,{TasksBoard:function(){return b}});var a=s(3827),r=s(4090),l=s(7907),n=s(575),o=s(5671),d=s(2782),c=s(2647),i=s(3277),u=s(2111);let m=["SMOKE","STRESS","SOAK","SPIKE","CUSTOM"],x=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],h={SMOKE:30,STRESS:60,SOAK:120,SPIKE:20,CUSTOM:60},p=e=>{let t=Math.max(0,e);return{minutes:String(Math.floor(t/60)),seconds:String(t%60)}},g=()=>({label:"",targetUrl:"",mode:"SMOKE",scheduleAt:"",method:"GET",payload:"",customVus:String(20),durationMinutes:p(h.SMOKE).minutes,durationSeconds:p(h.SMOKE).seconds,headers:[{key:"",value:""}],showAdvanced:!1});function b(e){var t,s;let{organizations:b,currentUser:f,initialOrganizationId:v,initialProjectId:j}=e,y=(0,l.useRouter)(),[N,k]=(0,r.useState)(null!==(s=null!=v?v:null===(t=b[0])||void 0===t?void 0:t.id)&&void 0!==s?s:null),[w,S]=(0,r.useState)([]),[C,M]=(0,r.useState)(null!=j?j:null),[O,T]=(0,r.useState)([]),[A,R]=(0,r.useState)({}),[U,E]=(0,r.useState)({}),[P,J]=(0,r.useState)(null),[_,F]=(0,r.useState)(null),[I,Y]=(0,r.useState)(null),[K,z]=(0,r.useState)(!1),[D,q]=(0,r.useState)(!1),H=(0,r.useRef)(null!=j?j:null),Z=(0,r.useMemo)(()=>(null==f?void 0:f.role)==="ADMINISTRATOR"||(null==f?void 0:f.role)==="OWNER",[f]),V=(0,r.useMemo)(()=>{var e;return null!==(e=b.find(e=>e.id===N))&&void 0!==e?e:null},[b,N]),L=(0,r.useMemo)(()=>!!V&&V.credits>=u.a,[V]),G=(0,r.useMemo)(()=>!!V&&V.credits>=u.YK,[V]),W=(0,r.useCallback)(e=>{var t;return null!==(t=U[e])&&void 0!==t?t:g()},[U]),B=(0,r.useCallback)((e,t)=>{E(s=>{var a;let r=null!==(a=s[e])&&void 0!==a?a:g();return{...s,[e]:t(r)}})},[]),Q=(0,r.useCallback)((e,t,s)=>{B(e,e=>{if("mode"===t){var a;let{minutes:t,seconds:r}=p(null!==(a=h[s])&&void 0!==a?a:h.SMOKE);return{...e,mode:s,durationMinutes:t,durationSeconds:r}}return{...e,[t]:s}})},[B]),X=(0,r.useCallback)(async e=>{z(!0),Y(null);try{let s=await fetch("/api/organizations/".concat(e,"/projects"),{cache:"no-store"});if(!s.ok){var t;let e=await s.json().catch(()=>({}));Y(null!==(t=e.error)&&void 0!==t?t:"Unable to load projects."),S([]),M(null);return}let a=await s.json();S(a),M(e=>{var t,s,r;let l=null!==(s=H.current)&&void 0!==s?s:e;return l&&a.some(e=>e.id===l)?(H.current=null,l):(H.current=null,null!==(r=null===(t=a[0])||void 0===t?void 0:t.id)&&void 0!==r?r:null)})}catch(e){console.warn("Failed to load projects",e),Y("Unexpected error loading projects."),S([]),M(null)}finally{z(!1)}},[]),$=(0,r.useCallback)(async e=>{q(!0),Y(null);try{let s=await fetch("/api/projects/".concat(e,"/tasks"),{cache:"no-store"});if(!s.ok){var t;let e=await s.json().catch(()=>({}));Y(null!==(t=e.error)&&void 0!==t?t:"Unable to load tasks."),T([]),R({});return}let a=await s.json();T(a);let r={};await Promise.all(a.map(async t=>{let s=await fetch("/api/projects/".concat(e,"/tasks/").concat(t.id,"/reports"),{cache:"no-store"});if(!s.ok){let e=await s.json().catch(()=>({}));Y(t=>{var s;return null!==(s=null!=t?t:e.error)&&void 0!==s?s:"Unable to load task reports."}),r[t.id]=[];return}r[t.id]=await s.json()})),R(r)}catch(e){console.warn("Failed to load tasks",e),Y("Unexpected error loading tasks."),T([]),R({})}finally{q(!1)}},[]);(0,r.useEffect)(()=>{if(!N){S([]),M(null);return}X(N)},[N,X]),(0,r.useEffect)(()=>{if(!C){T([]),R({});return}$(C)},[C,$]);let ee=e=>"number"==typeof e?"".concat(e.toFixed(2),"ms"):"—",et=e=>async t=>{var s,a;if(t.preventDefault(),!N){Y("Select an organization before creating tasks.");return}let r=W(e),l=r.headers.filter(e=>e.key.trim()).map(e=>({key:e.key.trim(),value:e.value})),n="CUSTOM"===r.mode&&r.customVus.trim()?Number(r.customVus):void 0,o="CUSTOM"===r.mode?(()=>{let e=Number(r.durationMinutes),t=Number(r.durationSeconds),s=Number.isFinite(e)&&e>0?Math.floor(e):0,a=Number.isFinite(t)?Math.floor(t):0,l=60*s+(a=Math.min(Math.max(a,0),59));return l>0?l:h.CUSTOM})():null!==(s=h[r.mode])&&void 0!==s?s:h.SMOKE;if(F(null),Y(null),!L){Y("Insufficient credits. Creating a task costs ".concat(u.a," credits."));return}try{let t=await fetch("/api/projects/".concat(e,"/tasks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:r.label.trim(),targetUrl:r.targetUrl.trim(),mode:r.mode,scheduleAt:r.scheduleAt.trim()||void 0,method:r.method.toUpperCase(),headers:l.length>0?l:void 0,payload:r.payload.trim()||void 0,customVus:Number.isFinite(null!=n?n:NaN)&&(null!=n?n:0)>0?n:void 0,durationSeconds:o})});if(!t.ok){let e=await t.json().catch(()=>({}));Y(null!==(a=e.error)&&void 0!==a?a:"Failed to create task.");return}E(t=>({...t,[e]:g()})),F("Task created. Refreshing tasks…"),await $(e),y.refresh()}catch(e){console.warn("Task creation failed",e),Y("Unexpected error creating task.")}},es=(0,r.useCallback)(e=>{var t,s;let a=Object.entries(e.headers&&"object"==typeof e.headers?e.headers:{}),r="CUSTOM"===e.mode?null!==(t=e.durationSeconds)&&void 0!==t?t:h.CUSTOM:null!==(s=h[e.mode])&&void 0!==s?s:h.SMOKE,l=a.length>0?a.map(e=>{let[t,s]=e;return{key:t,value:"string"==typeof s?s:JSON.stringify(null!=s?s:"")}}):[{key:"",value:""}],n=p(r);B(e.projectId,()=>{var t,s;return{label:"".concat(e.label," copy"),targetUrl:e.targetUrl,mode:e.mode,scheduleAt:"",method:null!==(t=e.method)&&void 0!==t?t:"GET",payload:null!==(s=e.payload)&&void 0!==s?s:"",customVus:"number"==typeof e.customVus&&e.customVus>0?String(e.customVus):String(20),durationMinutes:n.minutes,durationSeconds:n.seconds,headers:l,showAdvanced:!0}}),F("Task details loaded into the form. Adjust settings before saving."),Y(null),window.scrollTo({top:0,behavior:"smooth"})},[Y,F,B]),ea=(e,t)=>async()=>{if(F(null),Y(null),!N){Y("Select an organization before running tasks.");return}if(!G){Y("Insufficient credits. Running a task costs ".concat(u.YK," credits."));return}J(t);try{let a=await fetch("/api/projects/".concat(e,"/tasks/").concat(t,"/run"),{method:"POST"});if(!a.ok){var s;let e=await a.json().catch(()=>({}));Y(null!==(s=e.error)&&void 0!==s?s:"Failed to trigger task run.");return}let r=await a.json();F("completed"===r.status?"Task execution completed successfully.":"Task execution finished with errors."),await $(e),y.refresh()}catch(e){console.warn("Task run failed",e),Y("Unexpected error starting task run.")}finally{J(null)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-xs uppercase tracking-wide text-slate-400",children:"Organization"}),(0,a.jsx)("select",{value:null!=N?N:"",onChange:e=>k(e.target.value||null),className:"mt-2 w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 py-2 text-sm text-slate-100",children:b.map(e=>(0,a.jsx)("option",{value:e.id,children:"".concat(e.name," (").concat(e.credits," credits)")},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{className:"text-xs uppercase tracking-wide text-slate-400",children:"Project"}),(0,a.jsx)("select",{value:null!=C?C:"",onChange:e=>M(e.target.value||null),className:"mt-2 w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 py-2 text-sm text-slate-100",disabled:K||0===w.length,children:w.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),V?(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Credits remaining for ",V.name,": ",V.credits]}):0===b.length?(0,a.jsx)("p",{className:"text-xs text-warning",children:"No organizations available. Create one before managing tasks."}):null,_?(0,a.jsx)(o.Zb,{className:"border border-slate-800/60 bg-emerald-500/10",children:(0,a.jsx)(o.aY,{className:"p-4 text-sm text-emerald-300",children:_})}):null,I?(0,a.jsx)(o.Zb,{className:"border border-danger/40 bg-danger/10",children:(0,a.jsx)(o.aY,{className:"p-4 text-sm text-danger",children:I})}):null,K?(0,a.jsx)(o.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:(0,a.jsx)(o.aY,{className:"p-6 text-sm text-slate-400",children:"Loading projects…"})}):0===w.length?(0,a.jsx)(o.Zb,{className:"border-dashed border-slate-800/70 bg-slate-950/50",children:(0,a.jsx)(o.aY,{className:"p-6 text-sm text-slate-400",children:"No projects available. Create one from the Projects page to begin managing tasks."})}):null,C?(()=>{let e=W(C);return(0,a.jsxs)(a.Fragment,{children:[Z?(0,a.jsxs)(o.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Create task"}),(0,a.jsxs)(o.SZ,{children:["Configure a request and attach k6 options before launching a run. Cost:"," ",u.a," credits."]})]}),(0,a.jsxs)(o.aY,{children:[(0,a.jsxs)("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:et(C),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-label-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Task label"}),(0,a.jsx)(d.I,{id:"task-label-".concat(C),value:e.label,onChange:e=>Q(C,"label",e.target.value),placeholder:"Homepage smoke",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-target-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Target URL"}),(0,a.jsx)(d.I,{id:"task-target-".concat(C),value:e.targetUrl,onChange:e=>Q(C,"targetUrl",e.target.value),placeholder:"https://api.example.com/login",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-mode-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Mode"}),(0,a.jsx)("select",{id:"task-mode-".concat(C),value:e.mode,onChange:e=>Q(C,"mode",e.target.value),className:"mt-2 h-11 w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 text-sm text-slate-100",children:m.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-schedule-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Schedule at (optional)"}),(0,a.jsx)(d.I,{id:"task-schedule-".concat(C),type:"datetime-local",value:e.scheduleAt,onChange:e=>Q(C,"scheduleAt",e.target.value),className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100"})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex items-center justify-between rounded-lg border border-dashed border-slate-800/60 bg-slate-900/50 px-4 py-3",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Need custom headers, payloads, or methods?"}),(0,a.jsx)(n.z,{type:"button",variant:"secondary",className:"text-xs",onClick:()=>B(C,e=>({...e,showAdvanced:!e.showAdvanced})),children:e.showAdvanced?"Hide advanced":"Show advanced"})]}),e.showAdvanced?(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4 rounded-lg border border-slate-800/60 bg-slate-900/50 p-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-method-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"HTTP method"}),(0,a.jsx)("select",{id:"task-method-".concat(C),value:e.method,onChange:e=>Q(C,"method",e.target.value),className:"mt-2 h-11 w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 text-sm text-slate-100",children:x.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-payload-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Request payload (optional)"}),(0,a.jsx)("textarea",{id:"task-payload-".concat(C),value:e.payload,onChange:e=>Q(C,"payload",e.target.value),className:"mt-2 min-h-[120px] w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-600",placeholder:'e.g. {"status":"ok"}'})]})]}),(()=>{var t;let s="CUSTOM"===e.mode,r=null!==(t=h[e.mode])&&void 0!==t?t:h.SMOKE,l=s?{minutes:e.durationMinutes,seconds:e.durationSeconds}:p(r);return(0,a.jsxs)(a.Fragment,{children:[s?(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-custom-vus-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Custom virtual users"}),(0,a.jsx)(d.I,{id:"task-custom-vus-".concat(C),type:"number",min:1,placeholder:"e.g. 250",value:e.customVus,onChange:e=>Q(C,"customVus",e.target.value),className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-sm text-slate-100 placeholder:text-slate-600"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"Applied when mode is set to CUSTOM."})]}):null,(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-duration-minutes-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Duration (minutes)"}),(0,a.jsx)(d.I,{id:"task-duration-minutes-".concat(C),type:"number",min:0,value:l.minutes,onChange:e=>Q(C,"durationMinutes",e.target.value),className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-sm text-slate-100 placeholder:text-slate-600",disabled:!s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c._,{htmlFor:"task-duration-seconds-".concat(C),className:"text-xs uppercase tracking-wide text-slate-400",children:"Duration (seconds)"}),(0,a.jsx)(d.I,{id:"task-duration-seconds-".concat(C),type:"number",min:0,max:59,value:l.seconds,onChange:e=>Q(C,"durationSeconds",e.target.value),className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-sm text-slate-100 placeholder:text-slate-600",disabled:!s})]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:s?"Duration applies when using custom scenarios. Seconds are clamped between 0 and 59.":"Duration is derived from the selected scenario and cannot be edited."})]})})(),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Request headers"}),(0,a.jsx)(n.z,{type:"button",variant:"ghost",className:"text-xs",onClick:()=>B(C,e=>({...e,headers:[...e.headers,{key:"",value:""}]})),children:"Add header"})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.headers.map((e,t)=>(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto]",children:[(0,a.jsx)(d.I,{placeholder:"Header name",value:e.key,onChange:e=>B(C,s=>{let a=[...s.headers];return a[t]={...a[t],key:e.target.value},{...s,headers:a}}),className:"h-10 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100"}),(0,a.jsx)(d.I,{placeholder:"Header value",value:e.value,onChange:e=>B(C,s=>{let a=[...s.headers];return a[t]={...a[t],value:e.target.value},{...s,headers:a}}),className:"h-10 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100"}),(0,a.jsx)(n.z,{type:"button",variant:"ghost",className:"justify-self-end text-xs",onClick:()=>B(C,e=>{let s=e.headers.filter((e,s)=>s!==t);return{...e,headers:s.length>0?s:[{key:"",value:""}]}}),children:"Remove"})]},"".concat(C,"-header-").concat(t)))})]})]}):null,(0,a.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,a.jsx)(n.z,{type:"submit",className:"h-11 rounded-lg px-5",disabled:!e.label.trim()||!e.targetUrl.trim()||D||!L,children:"Create task"})})]}),L?null:(0,a.jsxs)("p",{className:"mt-3 text-xs text-warning",children:["Insufficient credits. You need ",u.a," credits to create a task in this organization."]})]})]}):null,V&&!G?(0,a.jsxs)("p",{className:"text-xs text-warning",children:["Running a task costs ",u.YK," credits. Top up to trigger executions in this organization."]}):null,D?(0,a.jsx)(o.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:(0,a.jsx)(o.aY,{className:"p-6 text-sm text-slate-400",children:"Loading tasks…"})}):0===O.length?(0,a.jsx)(o.Zb,{className:"border-dashed border-slate-800/70 bg-slate-950/50",children:(0,a.jsxs)(o.aY,{className:"p-6 text-sm text-slate-400",children:["No tasks yet. ",Z?"Create one using the form above.":"Tasks will appear once created by an owner."]})}):O.map(e=>{var t,s,r,l,d,c,u;let m=null!==(d=A[e.id])&&void 0!==d?d:[],x=m[0],h=e.headers&&"object"==typeof e.headers?Object.keys(e.headers).length:0,p="string"==typeof e.payload&&e.payload.length>0;return(0,a.jsxs)(o.Zb,{className:"border-slate-800/70 bg-slate-900/60",children:[(0,a.jsx)(o.Ol,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-slate-200 flex items-center gap-2",children:[e.label,(0,a.jsx)(i.C,{variant:"default",className:"bg-slate-800/70 text-[10px] uppercase",children:e.method})]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Mode: ",e.mode," • Target: ",e.targetUrl]}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Headers: ",h," • Payload: ",p?"Yes":"No"]})]}),Z?(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row",children:[(0,a.jsx)(n.z,{variant:"secondary",className:"w-full sm:w-auto",onClick:ea(e.projectId,e.id),disabled:P===e.id||!G,children:P===e.id?"Running…":"Run task"}),(0,a.jsx)(n.z,{type:"button",variant:"ghost",className:"w-full sm:w-auto",onClick:()=>es(e),children:"Duplicate"})]}):null]})}),(0,a.jsxs)(o.aY,{className:"space-y-3",children:[e.scheduleAt?(0,a.jsxs)(i.C,{variant:"warning",children:["Scheduled: ",new Date(e.scheduleAt).toLocaleString()]}):(0,a.jsx)(i.C,{variant:"default",className:"bg-surface-muted/80 text-slate-200",children:"On-demand"}),0===m.length?(0,a.jsx)("p",{className:"rounded-lg border border-dashed border-emerald-500/30 bg-emerald-500/5 px-4 py-3 text-xs text-emerald-200",children:"No runs yet. Trigger a task run to capture performance metrics."}):null,x?(0,a.jsxs)("div",{className:"rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-xs text-emerald-200 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-emerald-200",children:"Last run summary"}),(0,a.jsxs)("p",{className:"text-emerald-100",children:["Status: ",(0,a.jsx)("span",{className:"uppercase",children:x.status})," • Started:"," ",new Date(x.startedAt).toLocaleString(),x.completedAt?" • Completed: ".concat(new Date(x.completedAt).toLocaleString()):""]})]}),(null===(t=x.summaryJson)||void 0===t?void 0:t.scenario)?(0,a.jsxs)("p",{children:["Mode: ",x.summaryJson.scenario.mode," • Requests:"," ",null!==(c=x.summaryJson.scenario.totalRequests)&&void 0!==c?c:"—"]}):null,(null===(s=x.summaryJson)||void 0===s?void 0:s.metrics)?(0,a.jsxs)("p",{children:["Avg: ",ee(x.summaryJson.metrics.averageMs)," • P95:"," ",ee(x.summaryJson.metrics.p95Ms)," • Success rate:"," ",null!==(u=x.summaryJson.metrics.successRate)&&void 0!==u?u:"—","%"]}):null,(null===(r=x.summaryJson)||void 0===r?void 0:r.results)?(0,a.jsxs)("p",{children:["Requests:"," ",x.summaryJson.results.totalRequests," • Success:"," ",x.summaryJson.results.successCount," • Failures:"," ",x.summaryJson.results.failureCount]}):null,(()=>{var t,s;let r=null===(t=x.summaryJson)||void 0===t?void 0:t.request;if(!r)return(0,a.jsxs)("p",{children:["Method: ",e.method," • Headers: ",h," • Payload: ",p?"Yes":"No"]});let l=r.headers&&"object"==typeof r.headers?Object.keys(r.headers).length:0;return(0,a.jsxs)("p",{children:["Method: ",null!==(s=r.method)&&void 0!==s?s:e.method," • Headers: ",l," • Payload: ",r.hasPayload?"Yes":"No"]})})(),m.length>1?(0,a.jsxs)("details",{className:"text-[11px] text-emerald-100/80",children:[(0,a.jsxs)("summary",{className:"cursor-pointer",children:["Run history (",m.length,")"]}),(0,a.jsx)("div",{className:"mt-2 space-y-2",children:m.slice(1).map(t=>{var s,r,l,n;let o=null===(s=t.summaryJson)||void 0===s?void 0:s.request,d=(null==o?void 0:o.headers)&&"object"==typeof o.headers?Object.keys(o.headers).length:0;return(0,a.jsxs)("div",{className:"rounded border border-emerald-500/20 bg-emerald-500/5 px-3 py-2",children:[(0,a.jsxs)("p",{children:[new Date(t.startedAt).toLocaleString()," •"," ",(0,a.jsx)("span",{className:"uppercase",children:t.status})]}),(null===(r=t.summaryJson)||void 0===r?void 0:r.metrics)?(0,a.jsxs)("p",{children:["Avg: ",ee(t.summaryJson.metrics.averageMs)," • Success:"," ",null!==(l=t.summaryJson.metrics.successRate)&&void 0!==l?l:"—","%"]}):null,o?(0,a.jsxs)("p",{children:["Method: ",null!==(n=o.method)&&void 0!==n?n:e.method," • Headers: ",d," • Payload:"," ",o.hasPayload?"Yes":"No"]}):null]},t.id)})})]}):null,(null===(l=x.summaryJson)||void 0===l?void 0:l.raw)?(0,a.jsxs)("details",{className:"text-[11px] text-emerald-100/80",children:[(0,a.jsx)("summary",{className:"cursor-pointer",children:"Raw metrics"}),(0,a.jsx)("pre",{className:"mt-2 max-h-48 overflow-auto rounded-lg border border-emerald-500/20 bg-black/40 p-3 text-[10px] text-slate-200",children:JSON.stringify(x.summaryJson.raw,null,2)})]}):null]}):null]})]},e.id)})]})})():null]})}},3277:function(e,t,s){"use strict";s.d(t,{C:function(){return n}});var a=s(3827),r=s(2169);let l={default:"bg-surface-muted text-slate-200",success:"bg-success/20 text-success border border-success/40",warning:"bg-warning/20 text-warning border border-warning/40",danger:"bg-danger/20 text-danger border border-danger/40"};function n(e){let{className:t,variant:s="default",...n}=e;return(0,a.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium uppercase tracking-wide",l[s],t),...n})}},575:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(3827),r=s(4090),l=s(2169);let n={primary:"bg-accent-strong text-slate-950 hover:bg-accent-soft disabled:bg-accent-soft/50 disabled:text-slate-900/60",secondary:"bg-surface-muted text-slate-100 hover:bg-surface-subtle disabled:opacity-60 border border-slate-700/60",ghost:"bg-transparent text-slate-300 hover:bg-surface-subtle/50 disabled:opacity-40"},o=(0,r.forwardRef)((e,t)=>{let{className:s,variant:r="primary",type:o="button",...d}=e;return(0,a.jsx)("button",{ref:t,type:o,className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-soft focus-visible:ring-offset-2 focus-visible:ring-offset-background",n[r],"px-4 py-2",s),...d})});o.displayName="Button"},5671:function(e,t,s){"use strict";s.d(t,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var a=s(3827),r=s(2169);function l(e){let{className:t,children:s,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",t),...l,children:s})}function n(e){let{className:t,children:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("border-b border-slate-800/40 px-6 py-4",t),children:s})}function o(e){let{className:t,children:s}=e;return(0,a.jsx)("h3",{className:(0,r.cn)("text-lg font-semibold text-slate-100",t),children:s})}function d(e){let{className:t,children:s}=e;return(0,a.jsx)("p",{className:(0,r.cn)("text-sm text-slate-400",t),children:s})}function c(e){let{className:t,children:s}=e;return(0,a.jsx)("div",{className:(0,r.cn)("px-6 py-5",t),children:s})}},2782:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(3827),r=s(4090),l=s(2169);let n=(0,r.forwardRef)((e,t)=>{let{className:s,type:r="text",...n}=e;return(0,a.jsx)("input",{ref:t,type:r,className:(0,l.cn)("w-full rounded-md border border-slate-800 bg-background-subtle px-3 py-2 text-sm text-slate-100 shadow-sm transition focus:border-accent-soft focus:ring-2 focus:ring-accent-soft/60",s),...n})});n.displayName="Input"},2647:function(e,t,s){"use strict";s.d(t,{_:function(){return l}});var a=s(3827),r=s(2169);function l(e){let{className:t,...s}=e;return(0,a.jsx)("label",{className:(0,r.cn)("block text-sm font-medium text-slate-300 tracking-wide",t),...s})}},2111:function(e,t,s){"use strict";s.d(t,{YK:function(){return l},a:function(){return r},kb:function(){return n},zm:function(){return a}});let a=15,r=5,l=5,n=2},2169:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(3167);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.W)(t)}},3167:function(e,t,s){"use strict";function a(){for(var e,t,s=0,a="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=function e(t){var s,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(s=0;s<l;s++)t[s]&&(a=e(t[s]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a)}return r}(e))&&(a&&(a+=" "),a+=t);return a}s.d(t,{W:function(){return a}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=607)}),_N_E=e.O()}]);