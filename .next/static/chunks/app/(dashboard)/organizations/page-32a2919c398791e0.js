(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{9093:function(e,t,a){Promise.resolve().then(a.bind(a,7861)),Promise.resolve().then(a.bind(a,1764))},7907:function(e,t,a){"use strict";var r=a(5313);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},7861:function(e,t,a){"use strict";a.r(t),a.d(t,{CreateOrganizationForm:function(){return x}});var r=a(3827),s=a(4090),n=a(7907),l=a(575),i=a(5671),o=a(2782),c=a(2647),d=a(2169);let u={name:"",slug:"",ownerName:"",ownerEmail:"",ownerPassword:""},m=e=>e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,60);function x(e){let{className:t}=e,a=(0,n.useRouter)(),[x,h]=(0,s.useState)(u),[g,p]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),[w,j]=(0,s.useState)(null),[N,v]=(0,s.useState)(!1),y=(0,s.useMemo)(()=>!x.name||!x.slug||!x.ownerName||!x.ownerEmail||x.ownerPassword.length<8||g,[x,g]),z=e=>t=>{let a=t.target.value;h(t=>{let r={...t,[e]:a};return"name"!==e||N||(r.slug=m(a)),"slug"===e&&(v(!0),r.slug=m(a)),r})},S=async e=>{e.preventDefault(),p(!0),b(null),j(null);try{let e=await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.name.trim(),slug:x.slug.trim(),owner:{name:x.ownerName.trim(),email:x.ownerEmail.trim(),password:x.ownerPassword}})});if(!e.ok){var t;let a=await e.json().catch(()=>({}));b(null!==(t=a.error)&&void 0!==t?t:"Unable to create organization."),p(!1);return}j("Organization created and owner invited."),h(u),v(!1),a.refresh()}catch(e){console.warn("Failed to create organization",e),b("Unexpected error creating organization.")}finally{p(!1)}};return(0,r.jsxs)(i.Zb,{className:(0,d.cn)("border-slate-800/70 bg-slate-950/60",t),children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Create Organization"}),(0,r.jsx)(i.SZ,{children:"Spin up a new portfolio and assign its owner. Owners gain immediate access with a seeded account."})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("form",{className:"grid gap-6 md:grid-cols-2",onSubmit:S,children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsx)(c._,{htmlFor:"organization-name",className:"text-xs uppercase tracking-wide text-slate-400",children:"Organization name"}),(0,r.jsx)(o.I,{id:"organization-name",value:x.name,onChange:z("name"),placeholder:"RedAnt Platform",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsx)(c._,{htmlFor:"organization-slug",className:"text-xs uppercase tracking-wide text-slate-400",children:"Organization slug"}),(0,r.jsx)(o.I,{id:"organization-slug",value:x.slug,onChange:z("slug"),placeholder:"redant-platform",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Used in URLs and automation workflows."})]}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsxs)("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/60 p-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-slate-200",children:"Owner account"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:"We will create a new owner user and add them to the organization automatically."}),(0,r.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"owner-name",className:"text-xs uppercase tracking-wide text-slate-400",children:"Owner name"}),(0,r.jsx)(o.I,{id:"owner-name",value:x.ownerName,onChange:z("ownerName"),placeholder:"Jamie Lead",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c._,{htmlFor:"owner-email",className:"text-xs uppercase tracking-wide text-slate-400",children:"Owner email"}),(0,r.jsx)(o.I,{id:"owner-email",type:"email",value:x.ownerEmail,onChange:z("ownerEmail"),placeholder:"jamie.lead@example.com",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(c._,{htmlFor:"owner-password",className:"text-xs uppercase tracking-wide text-slate-400",children:"Temporary password"}),(0,r.jsx)(o.I,{id:"owner-password",type:"password",value:x.ownerPassword,onChange:z("ownerPassword"),placeholder:"At least 8 characters",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0,minLength:8}),(0,r.jsx)("p",{className:"mt-2 text-xs text-slate-500",children:"Share this password with the owner and encourage them to change it on first login."})]})]})]})}),f?(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("p",{className:"rounded-lg border border-danger/40 bg-danger/10 px-3 py-2 text-sm text-danger",children:f})}):null,w?(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("p",{className:"rounded-lg border border-success/40 bg-success/10 px-3 py-2 text-sm text-success",children:w})}):null,(0,r.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,r.jsx)(l.z,{type:"submit",className:"h-11 rounded-lg px-6",disabled:y,children:g?"Creating…":"Create organization"})})]})})]})}},1764:function(e,t,a){"use strict";a.r(t),a.d(t,{OrganizationCreditsTopUp:function(){return c}});var r=a(3827),s=a(4090),n=a(7907),l=a(575),i=a(2782),o=a(2647);function c(e){let{organizationId:t,organizationName:a}=e,c=(0,n.useRouter)(),[d,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)("50"),[h,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),b=async e=>{e.preventDefault();let a=Number(m);if(!Number.isFinite(a)||a<=0){g("Enter a positive credit amount.");return}f(!0),g(null);try{let e=await fetch("/api/organizations/".concat(t,"/credits"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:a})});if(!e.ok){var r;let t=await e.json().catch(()=>({}));g(null!==(r=t.error)&&void 0!==r?r:"Failed to add credits.");return}x("50"),u(!1),c.refresh()}catch(e){console.warn("Failed to top up credits",e),g("Unexpected error adding credits.")}finally{f(!1)}};return d?(0,r.jsxs)("form",{className:"flex items-center gap-2",onSubmit:b,children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)(o._,{htmlFor:"credit-amount-".concat(t),className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Credits to add"}),(0,r.jsx)(i.I,{id:"credit-amount-".concat(t),type:"number",min:1,value:m,onChange:e=>x(e.target.value),className:"h-9 w-28 rounded-lg border-slate-800/70 bg-slate-950/70 text-sm text-slate-100"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.z,{type:"submit",className:"h-9 px-4",disabled:p,children:p?"Adding…":"Confirm"}),(0,r.jsx)(l.z,{type:"button",variant:"ghost",className:"text-xs",onClick:()=>{u(!1),x("50"),g(null)},children:"Cancel"})]}),h?(0,r.jsx)("p",{className:"text-xs text-danger",children:h}):null]}):(0,r.jsx)(l.z,{variant:"secondary",className:"text-xs",onClick:()=>{u(!0),g(null)},children:"Add credits"})}},575:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var r=a(3827),s=a(4090),n=a(2169);let l={primary:"bg-accent-strong text-slate-950 hover:bg-accent-soft disabled:bg-accent-soft/50 disabled:text-slate-900/60",secondary:"bg-surface-muted text-slate-100 hover:bg-surface-subtle disabled:opacity-60 border border-slate-700/60",ghost:"bg-transparent text-slate-300 hover:bg-surface-subtle/50 disabled:opacity-40"},i=(0,s.forwardRef)((e,t)=>{let{className:a,variant:s="primary",type:i="button",...o}=e;return(0,r.jsx)("button",{ref:t,type:i,className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-soft focus-visible:ring-offset-2 focus-visible:ring-offset-background",l[s],"px-4 py-2",a),...o})});i.displayName="Button"},5671:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return n},aY:function(){return c},ll:function(){return i}});var r=a(3827),s=a(2169);function n(e){let{className:t,children:a,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",t),...n,children:a})}function l(e){let{className:t,children:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("border-b border-slate-800/40 px-6 py-4",t),children:a})}function i(e){let{className:t,children:a}=e;return(0,r.jsx)("h3",{className:(0,s.cn)("text-lg font-semibold text-slate-100",t),children:a})}function o(e){let{className:t,children:a}=e;return(0,r.jsx)("p",{className:(0,s.cn)("text-sm text-slate-400",t),children:a})}function c(e){let{className:t,children:a}=e;return(0,r.jsx)("div",{className:(0,s.cn)("px-6 py-5",t),children:a})}},2782:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(3827),s=a(4090),n=a(2169);let l=(0,s.forwardRef)((e,t)=>{let{className:a,type:s="text",...l}=e;return(0,r.jsx)("input",{ref:t,type:s,className:(0,n.cn)("w-full rounded-md border border-slate-800 bg-background-subtle px-3 py-2 text-sm text-slate-100 shadow-sm transition focus:border-accent-soft focus:ring-2 focus:ring-accent-soft/60",a),...l})});l.displayName="Input"},2647:function(e,t,a){"use strict";a.d(t,{_:function(){return n}});var r=a(3827),s=a(2169);function n(e){let{className:t,...a}=e;return(0,r.jsx)("label",{className:(0,s.cn)("block text-sm font-medium text-slate-300 tracking-wide",t),...a})}},2169:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var r=a(3167);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.W)(t)}},3167:function(e,t,a){"use strict";function r(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{W:function(){return r}})}},function(e){e.O(0,[971,69,744],function(){return e(e.s=9093)}),_N_E=e.O()}]);