(()=>{var e={};e.id=459,e.ids=[459],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=a(482),r=a(9108),n=a(2563),l=a.n(n),i=a(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["(dashboard)",{children:["organizations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,723)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/organizations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8519)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2917)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/organizations/page.tsx"],x="/(dashboard)/organizations/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/organizations/page",pathname:"/organizations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4121:(e,t,a)=>{Promise.resolve().then(a.bind(a,4866)),Promise.resolve().then(a.bind(a,673))},4866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{CreateOrganizationForm:()=>u});var s=a(5344),r=a(3729),n=a(8428),l=a(5094),i=a(3673),o=a(6540),d=a(7361),c=a(1453);let x={name:"",slug:"",ownerName:"",ownerEmail:"",ownerPassword:""},m=e=>e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,60);function u({className:e}){let t=(0,n.useRouter)(),[a,u]=(0,r.useState)(x),[p,h]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),[b,f]=(0,r.useState)(null),[N,w]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>!a.name||!a.slug||!a.ownerName||!a.ownerEmail||a.ownerPassword.length<8||p,[a,p]),v=e=>t=>{let a=t.target.value;u(t=>{let s={...t,[e]:a};return"name"!==e||N||(s.slug=m(a)),"slug"===e&&(w(!0),s.slug=m(a)),s})},z=async e=>{e.preventDefault(),h(!0),j(null),f(null);try{let e=await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name.trim(),slug:a.slug.trim(),owner:{name:a.ownerName.trim(),email:a.ownerEmail.trim(),password:a.ownerPassword}})});if(!e.ok){let t=await e.json().catch(()=>({}));j(t.error??"Unable to create organization."),h(!1);return}f("Organization created and owner invited."),u(x),w(!1),t.refresh()}catch(e){console.warn("Failed to create organization",e),j("Unexpected error creating organization.")}finally{h(!1)}};return(0,s.jsxs)(i.Zb,{className:(0,c.cn)("border-slate-800/70 bg-slate-950/60",e),children:[(0,s.jsxs)(i.Ol,{children:[s.jsx(i.ll,{children:"Create Organization"}),s.jsx(i.SZ,{children:"Spin up a new portfolio and assign its owner. Owners gain immediate access with a seeded account."})]}),s.jsx(i.aY,{children:(0,s.jsxs)("form",{className:"grid gap-6 md:grid-cols-2",onSubmit:z,children:[(0,s.jsxs)("div",{className:"md:col-span-1",children:[s.jsx(d._,{htmlFor:"organization-name",className:"text-xs uppercase tracking-wide text-slate-400",children:"Organization name"}),s.jsx(o.I,{id:"organization-name",value:a.name,onChange:v("name"),placeholder:"RedAnt Platform",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[s.jsx(d._,{htmlFor:"organization-slug",className:"text-xs uppercase tracking-wide text-slate-400",children:"Organization slug"}),s.jsx(o.I,{id:"organization-slug",value:a.slug,onChange:v("slug"),placeholder:"redant-platform",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Used in URLs and automation workflows."})]}),s.jsx("div",{className:"md:col-span-2",children:(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-800/60 bg-slate-900/60 p-4",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-200",children:"Owner account"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"We will create a new owner user and add them to the organization automatically."}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"owner-name",className:"text-xs uppercase tracking-wide text-slate-400",children:"Owner name"}),s.jsx(o.I,{id:"owner-name",value:a.ownerName,onChange:v("ownerName"),placeholder:"Jamie Lead",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx(d._,{htmlFor:"owner-email",className:"text-xs uppercase tracking-wide text-slate-400",children:"Owner email"}),s.jsx(o.I,{id:"owner-email",type:"email",value:a.ownerEmail,onChange:v("ownerEmail"),placeholder:"jamie.lead@example.com",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx(d._,{htmlFor:"owner-password",className:"text-xs uppercase tracking-wide text-slate-400",children:"Temporary password"}),s.jsx(o.I,{id:"owner-password",type:"password",value:a.ownerPassword,onChange:v("ownerPassword"),placeholder:"At least 8 characters",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0,minLength:8}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Share this password with the owner and encourage them to change it on first login."})]})]})]})}),g?s.jsx("div",{className:"md:col-span-2",children:s.jsx("p",{className:"rounded-lg border border-danger/40 bg-danger/10 px-3 py-2 text-sm text-danger",children:g})}):null,b?s.jsx("div",{className:"md:col-span-2",children:s.jsx("p",{className:"rounded-lg border border-success/40 bg-success/10 px-3 py-2 text-sm text-success",children:b})}):null,s.jsx("div",{className:"md:col-span-2 flex justify-end",children:s.jsx(l.z,{type:"submit",className:"h-11 rounded-lg px-6",disabled:y,children:p?"Creating…":"Create organization"})})]})})]})}},673:(e,t,a)=>{"use strict";a.r(t),a.d(t,{OrganizationCreditsTopUp:()=>d});var s=a(5344),r=a(3729),n=a(8428),l=a(5094),i=a(6540),o=a(7361);function d({organizationId:e,organizationName:t}){let a=(0,n.useRouter)(),[d,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)("50"),[u,p]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),j=async t=>{t.preventDefault();let s=Number(x);if(!Number.isFinite(s)||s<=0){p("Enter a positive credit amount.");return}g(!0),p(null);try{let t=await fetch(`/api/organizations/${e}/credits`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:s})});if(!t.ok){let e=await t.json().catch(()=>({}));p(e.error??"Failed to add credits.");return}m("50"),c(!1),a.refresh()}catch(e){console.warn("Failed to top up credits",e),p("Unexpected error adding credits.")}finally{g(!1)}};return d?(0,s.jsxs)("form",{className:"flex items-center gap-2",onSubmit:j,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[s.jsx(o._,{htmlFor:`credit-amount-${e}`,className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Credits to add"}),s.jsx(i.I,{id:`credit-amount-${e}`,type:"number",min:1,value:x,onChange:e=>m(e.target.value),className:"h-9 w-28 rounded-lg border-slate-800/70 bg-slate-950/70 text-sm text-slate-100"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(l.z,{type:"submit",className:"h-9 px-4",disabled:h,children:h?"Adding…":"Confirm"}),s.jsx(l.z,{type:"button",variant:"ghost",className:"text-xs",onClick:()=>{c(!1),m("50"),p(null)},children:"Cancel"})]}),u?s.jsx("p",{className:"text-xs text-danger",children:u}):null]}):s.jsx(l.z,{variant:"secondary",className:"text-xs",onClick:()=>{c(!0),p(null)},children:"Add credits"})}},3673:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>l,SZ:()=>o,Zb:()=>n,aY:()=>d,ll:()=>i});var s=a(5344),r=a(1453);function n({className:e,children:t,...a}){return s.jsx("div",{className:(0,r.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",e),...a,children:t})}function l({className:e,children:t}){return s.jsx("div",{className:(0,r.cn)("border-b border-slate-800/40 px-6 py-4",e),children:t})}function i({className:e,children:t}){return s.jsx("h3",{className:(0,r.cn)("text-lg font-semibold text-slate-100",e),children:t})}function o({className:e,children:t}){return s.jsx("p",{className:(0,r.cn)("text-sm text-slate-400",e),children:t})}function d({className:e,children:t}){return s.jsx("div",{className:(0,r.cn)("px-6 py-5",e),children:t})}},6540:(e,t,a)=>{"use strict";a.d(t,{I:()=>l});var s=a(5344),r=a(3729),n=a(1453);let l=(0,r.forwardRef)(({className:e,type:t="text",...a},r)=>s.jsx("input",{ref:r,type:t,className:(0,n.cn)("w-full rounded-md border border-slate-800 bg-background-subtle px-3 py-2 text-sm text-slate-100 shadow-sm transition focus:border-accent-soft focus:ring-2 focus:ring-accent-soft/60",e),...a}));l.displayName="Input"},7361:(e,t,a)=>{"use strict";a.d(t,{_:()=>n});var s=a(5344),r=a(1453);function n({className:e,...t}){return s.jsx("label",{className:(0,r.cn)("block text-sm font-medium text-slate-300 tracking-wide",e),...t})}},723:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(5036),r=a(7439),n=a(6843);let l=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/create-organization-form.tsx`),{__esModule:i,$$typeof:o}=l;l.default;let d=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/create-organization-form.tsx#CreateOrganizationForm`),c=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/organization-credits-topup.tsx`),{__esModule:x,$$typeof:m}=c;c.default;let u=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/organization-credits-topup.tsx#OrganizationCreditsTopUp`);var p=a(1842),h=a(4551),g=a(3560),j=a(2002);async function b(){let e="http://localhost:3001",t=r.cookies().get("lt_token")?.value,[a,n]=await Promise.all([(0,g.ZC)(e,t),(0,j.k)(e,t)]),l=n?.role==="ADMINISTRATOR";return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"Organizations"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Track ownership, project load, and credit balances for each load-test portfolio. Credits power key actions: 15 per project creation, 5 per task or task run, and 2 per security check."})]}),l?s.jsx(d,{}):s.jsx(h.Zb,{className:"border-dashed border-slate-800/70 bg-slate-950/40",children:(0,s.jsxs)(h.aY,{className:"flex flex-col gap-2 p-6 text-sm text-slate-400",children:[s.jsx("p",{className:"font-medium text-slate-200",children:"Limited access"}),s.jsx("p",{children:"Only administrators can create new organizations. Reach out to the support team if you need an additional portfolio."})]})}),(0,s.jsxs)(h.Zb,{className:"shadow-card",children:[(0,s.jsxs)(h.Ol,{children:[s.jsx(h.ll,{children:"Portfolio Overview"}),s.jsx(h.SZ,{children:"Every organization synced from the orchestration API."})]}),s.jsx(h.aY,{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-slate-800/70 text-sm",children:[s.jsx("thead",{className:"text-left uppercase tracking-wider text-xs text-slate-500",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Organization"}),s.jsx("th",{className:"px-4 py-3",children:"Slug"}),s.jsx("th",{className:"px-4 py-3",children:"Projects"}),s.jsx("th",{className:"px-4 py-3",children:"Credits"}),s.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800/70 text-sm text-slate-200",children:0===a.length?s.jsx("tr",{children:(0,s.jsxs)("td",{className:"px-4 py-6 text-center text-slate-500",colSpan:5,children:["No organizations available. ",l?"Create one to get started.":"Ask an administrator to create one."]})}):a.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium text-slate-100",children:e.name}),s.jsx("span",{className:"text-xs text-slate-500",children:"Owner managed"})]})}),s.jsx("td",{className:"px-4 py-4 text-xs uppercase tracking-wide text-slate-400",children:e.slug}),s.jsx("td",{className:"px-4 py-4",children:(0,s.jsxs)(p.C,{variant:"default",className:"bg-surface-muted/80 text-slate-200",children:[e.projectCount," active"]})}),s.jsx("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[(0,s.jsxs)(p.C,{variant:"default",className:"bg-slate-800/70 text-slate-200",children:[e.credits," credits"]}),l?s.jsx(u,{organizationId:e.id,organizationName:e.name}):null]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx(p.C,{variant:"success",children:"Operational"})})]},e.id))})]})})]})]})}},4551:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>l,SZ:()=>o,Zb:()=>n,aY:()=>d,ll:()=>i});var s=a(5036),r=a(2245);function n({className:e,children:t,...a}){return s.jsx("div",{className:(0,r.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",e),...a,children:t})}function l({className:e,children:t}){return s.jsx("div",{className:(0,r.cn)("border-b border-slate-800/40 px-6 py-4",e),children:t})}function i({className:e,children:t}){return s.jsx("h3",{className:(0,r.cn)("text-lg font-semibold text-slate-100",e),children:t})}function o({className:e,children:t}){return s.jsx("p",{className:(0,r.cn)("text-sm text-slate-400",e),children:t})}function d({className:e,children:t}){return s.jsx("div",{className:(0,r.cn)("px-6 py-5",e),children:t})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,439,356,630,743],()=>a(246));module.exports=s})();