(()=>{var e={};e.id=164,e.ids=[164],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5882:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(482),a=s(9108),n=s(2563),l=s.n(n),o=s(8300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["(dashboard)",{children:["projects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4011)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/projects/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8519)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/projects/page.tsx"],x="/(dashboard)/projects/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/projects/page",pathname:"/projects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7639:(e,t,s)=>{Promise.resolve().then(s.bind(s,5139))},5139:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ProjectsOverview:()=>u});var r=s(5344),a=s(3729),n=s(6506),l=s(8428),o=s(5094),i=s(3673),c=s(6540),d=s(7361),x=s(9591),m=s(6813);function u({organizations:e,currentUser:t}){let s=(0,l.useRouter)(),[u,p]=(0,a.useState)(e[0]?.id??null),[h,j]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[N,y]=(0,a.useState)({name:"",description:""}),[w,k]=(0,a.useState)(null),P=(0,a.useMemo)(()=>!!t&&("ADMINISTRATOR"===t.role||"OWNER"===t.role),[t]),z=(0,a.useCallback)(async e=>{g(!0),v(null);try{let t=await fetch(`/api/organizations/${e}/projects`,{cache:"no-store"});if(!t.ok){let e=await t.json().catch(()=>({}));v(e.error??"Unable to load projects."),j([]);return}let s=await t.json();j(s)}catch(e){console.warn("Failed to load projects",e),v("Unexpected error loading projects.")}finally{g(!1)}},[]);(0,a.useEffect)(()=>{if(!u){j([]);return}z(u)},[u,z]);let _=(0,a.useMemo)(()=>e.find(e=>e.id===u)??null,[e,u]),C=(0,a.useMemo)(()=>!!_&&_.credits>=m.zm,[_]),S=async e=>{if(e.preventDefault(),u){k(null),v(null);try{let e=await fetch(`/api/organizations/${u}/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N.name.trim(),description:N.description.trim()||void 0})});if(!e.ok){let t=await e.json().catch(()=>({}));v(t.error??"Failed to create project.");return}y({name:"",description:""}),k("Project created successfully."),await z(u),s.refresh()}catch(e){console.warn("Project creation failed",e),v("Unexpected error creating project.")}}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-slate-200",children:"Organization scope"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Projects and actions are filtered to the selected organization."})]}),r.jsx("select",{value:u??"",onChange:e=>p(e.target.value||null),className:"w-full rounded-lg border border-slate-800/70 bg-slate-950/70 px-3 py-2 text-sm text-slate-100 sm:w-72",children:e.map(e=>r.jsx("option",{value:e.id,children:`${e.name} (${e.credits} credits)`},e.id))})]}),_?(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Credits remaining for ",_.name,": ",_.credits]}):0===e.length?r.jsx("p",{className:"text-xs text-warning",children:"No organizations available. Create one before adding projects."}):null,P?(0,r.jsxs)(i.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{children:"Create project"}),(0,r.jsxs)(i.SZ,{children:["Define a new load-test project within the selected organization. Cost:"," ",m.zm," credits."]})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsxs)("form",{className:"grid gap-4 md:grid-cols-2",onSubmit:S,children:[(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"project-name",className:"text-xs uppercase tracking-wide text-slate-400",children:"Project name"}),r.jsx(c.I,{id:"project-name",value:N.name,onChange:e=>y(t=>({...t,name:e.target.value})),placeholder:"Baseline Smoke Tests",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"project-description",className:"text-xs uppercase tracking-wide text-slate-400",children:"Description"}),r.jsx(c.I,{id:"project-description",value:N.description,onChange:e=>y(t=>({...t,description:e.target.value})),placeholder:"Optional summary for collaborators",className:"mt-2 h-11 rounded-lg border-slate-800/70 bg-slate-950/70 text-slate-100 placeholder:text-slate-600"})]}),r.jsx("div",{className:"md:col-span-2 flex justify-end",children:r.jsx(o.z,{type:"submit",className:"h-11 rounded-lg px-5",disabled:!N.name.trim()||b||!_||!C,children:"Create project"})})]}),_&&!C?(0,r.jsxs)("p",{className:"mt-3 text-xs text-warning",children:["Insufficient credits. You need ",m.zm," credits to create a project in this organization."]}):null]})]}):r.jsx(i.Zb,{className:"border-dashed border-slate-800/70 bg-slate-950/50",children:r.jsx(i.aY,{className:"p-6 text-sm text-slate-400",children:"Only administrators and organization owners can create new projects."})}),w?r.jsx(i.Zb,{className:"border border-slate-800/60 bg-emerald-500/10",children:r.jsx(i.aY,{className:"p-4 text-sm text-emerald-300",children:w})}):null,f?r.jsx(i.Zb,{className:"border border-danger/40 bg-danger/10",children:r.jsx(i.aY,{className:"p-4 text-sm text-danger",children:f})}):null,b?r.jsx(i.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:r.jsx(i.aY,{className:"p-6 text-sm text-slate-400",children:"Loading projects…"})}):0===h.length?r.jsx(i.Zb,{className:"border-dashed border-slate-800/70 bg-slate-950/50",children:(0,r.jsxs)(i.aY,{className:"p-6 text-sm text-slate-400",children:["No projects found. ",P?"Create your first project above.":"Ask an owner to create one."]})}):r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:h.map(t=>(0,r.jsxs)(i.Zb,{className:"border-slate-800/70 bg-slate-950/60",children:[(0,r.jsxs)(i.Ol,{children:[r.jsx(i.ll,{className:"text-lg text-slate-100",children:t.name}),t.description?r.jsx(i.SZ,{children:t.description}):null]}),(0,r.jsxs)(i.aY,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx(x.C,{variant:"default",className:"bg-surface-muted/70 text-slate-300",children:e.find(e=>e.id===u)?.name??"—"}),r.jsx(n.default,{href:`/tasks?projectId=${t.id}&organizationId=${u??""}`,className:"inline-flex items-center justify-center rounded-lg border border-slate-800/70 bg-slate-900/70 px-4 py-2 text-sm font-semibold text-slate-100 hover:bg-slate-900",children:"Manage tasks"})]})]},t.id))})]})}},9591:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var r=s(5344),a=s(1453);let n={default:"bg-surface-muted text-slate-200",success:"bg-success/20 text-success border border-success/40",warning:"bg-warning/20 text-warning border border-warning/40",danger:"bg-danger/20 text-danger border border-danger/40"};function l({className:e,variant:t="default",...s}){return r.jsx("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium uppercase tracking-wide",n[t],e),...s})}},3673:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>i,Zb:()=>n,aY:()=>c,ll:()=>o});var r=s(5344),a=s(1453);function n({className:e,children:t,...s}){return r.jsx("div",{className:(0,a.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",e),...s,children:t})}function l({className:e,children:t}){return r.jsx("div",{className:(0,a.cn)("border-b border-slate-800/40 px-6 py-4",e),children:t})}function o({className:e,children:t}){return r.jsx("h3",{className:(0,a.cn)("text-lg font-semibold text-slate-100",e),children:t})}function i({className:e,children:t}){return r.jsx("p",{className:(0,a.cn)("text-sm text-slate-400",e),children:t})}function c({className:e,children:t}){return r.jsx("div",{className:(0,a.cn)("px-6 py-5",e),children:t})}},6540:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var r=s(5344),a=s(3729),n=s(1453);let l=(0,a.forwardRef)(({className:e,type:t="text",...s},a)=>r.jsx("input",{ref:a,type:t,className:(0,n.cn)("w-full rounded-md border border-slate-800 bg-background-subtle px-3 py-2 text-sm text-slate-100 shadow-sm transition focus:border-accent-soft focus:ring-2 focus:ring-accent-soft/60",e),...s}));l.displayName="Input"},7361:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var r=s(5344),a=s(1453);function n({className:e,...t}){return r.jsx("label",{className:(0,a.cn)("block text-sm font-medium text-slate-300 tracking-wide",e),...t})}},6813:(e,t,s)=>{"use strict";s.d(t,{YK:()=>n,a:()=>a,kb:()=>l,zm:()=>r});let r=15,a=5,n=5,l=2},4011:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(5036),a=s(7439),n=s(6843);let l=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/projects-overview.tsx`),{__esModule:o,$$typeof:i}=l;l.default;let c=(0,n.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/projects-overview.tsx#ProjectsOverview`);var d=s(3560),x=s(2002);async function m(){let e="http://localhost:3001",t=a.cookies().get("lt_token")?.value,[s,n]=await Promise.all([(0,d.ZC)(e,t),(0,x.k)(e,t)]);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"Projects"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Curate smoke, stress, and soak suites, then deploy them confidently into production-like environments."})]}),r.jsx(c,{organizations:s,currentUser:n})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,439,356,630,743],()=>s(5882));module.exports=r})();