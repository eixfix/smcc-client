(()=>{var e={};e.id=960,e.ids=[960],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5318:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=t(482),a=t(9108),l=t(2563),n=t.n(l),o=t(8300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let c=["",{children:["(dashboard)",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6137)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/reports/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8519)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2917)),"/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/app/(dashboard)/reports/page.tsx"],x="/(dashboard)/reports/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/reports/page",pathname:"/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},871:(e,s,t)=>{Promise.resolve().then(t.bind(t,2975))},2975:(e,s,t)=>{"use strict";t.r(s),t.d(s,{DownloadReportButton:()=>n});var r=t(5344),a=t(3729),l=t(5094);function n(){let[e,s]=(0,a.useState)(!1),t=async()=>{s(!0);try{let e=await fetch("/api/reports/recent/export");if(!e.ok)throw Error("Failed to export report");let s=await e.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="load-test-report.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}catch(e){console.warn("Failed to export report",e),alert("Unable to export report. Please try again later.")}finally{s(!1)}};return r.jsx(l.z,{onClick:t,disabled:e,variant:"secondary",children:e?"Preparing PDF…":"Download PDF Report"})}},6137:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5036),a=t(7439),l=t(4551),n=t(1842),o=t(6843);let i=(0,o.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/download-report-button.tsx`),{__esModule:c,$$typeof:d}=i;i.default;let x=(0,o.createProxy)(String.raw`/Users/rizkyakbar/Projects/mine/LoadTest/load-test-client/src/components/dashboard/download-report-button.tsx#DownloadReportButton`);var p=t(3560);let m={completed:"success",failed:"danger"};function u(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"—"}function h(e){return"number"!=typeof e||Number.isNaN(e)?"—":`${e.toFixed(2)} ms`}async function b(){let e=a.cookies().get("lt_token")?.value,s=await (0,p.gX)("http://localhost:3001",e),t=(()=>{if(0===s.length)return null;let e=0,t=0,r={},a=0,l=0,n=0;s.forEach(s=>{"completed"===s.status.toLowerCase()?e+=1:t+=1;let o=s.summaryJson?.scenario?.mode??s.task.label;o&&(r[o]=(r[o]??0)+1),"number"==typeof s.summaryJson?.metrics?.averageMs&&(a+=s.summaryJson.metrics.averageMs,n+=1),"number"==typeof s.summaryJson?.metrics?.p95Ms&&(l+=s.summaryJson.metrics.p95Ms)});let o=s.length,i=e/o*100,c=Object.entries(r).sort((e,s)=>s[1]-e[1])[0]?.[0]??"—",d=n?a/n:null,x=n?l/n:null,p="Healthy baseline; continue to monitor trending latency.";return i<95?p="Elevated failure rate detected; prioritize investigating degraded tasks.":x&&x>1200&&(p="High P95 latency suggests capacity issues; consider scaling or tuning scenarios."),{overallCount:o,successRate:i,topMode:c,averageLatency:d,averageP95:x,recommendation:p}})();return(0,r.jsxs)("div",{className:"space-y-6 max-h-[calc(100vh-12rem)] overflow-y-auto pr-1 sm:pr-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"Reports"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Review the latest load-test executions across your organizations. Drill into the metrics and pull detail snapshots for stakeholders."})]}),(0,r.jsxs)(l.Zb,{className:"shadow-card",children:[(0,r.jsxs)(l.Ol,{className:"sm:flex sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(l.ll,{children:"Recent Task Runs"}),r.jsx(l.SZ,{children:"Last 25 executions across your accessible organizations. Filtered to your membership."})]}),r.jsx(x,{})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[t?(0,r.jsxs)("div",{className:"grid gap-4 rounded-xl border border-slate-800/70 bg-surface-subtle/60 p-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Runs analysed"}),r.jsx("p",{className:"text-lg font-semibold text-slate-100",children:t.overallCount})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Success rate"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-slate-100",children:[t.successRate.toFixed(2),"%"]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Dominant mode"}),r.jsx("p",{className:"text-lg font-semibold text-slate-100",children:u(t.topMode)})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Avg latency (P95)"}),r.jsx("p",{className:"text-lg font-semibold text-slate-100",children:t.averageP95?h(t.averageP95):"—"})]}),(0,r.jsxs)("div",{className:"sm:col-span-2 lg:col-span-4",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Prediction & insight"}),r.jsx("p",{className:"text-sm text-slate-300",children:t.recommendation})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Avg latency"}),r.jsx("p",{className:"text-lg font-semibold text-slate-100",children:t.averageLatency?h(t.averageLatency):"—"})]})]}):null,0===s.length?r.jsx("div",{className:"rounded-xl border border-dashed border-slate-700/70 bg-surface-muted/40 px-5 py-6 text-sm text-slate-400",children:"No task runs yet. Launch a scenario from the Projects tab to see detail here."}):s.map(e=>{let s=e.task.project.organization,t=e.summaryJson??{},a=t.scenario?.mode??e.task.label,l=t.metrics,o=t.results,i=t.request,c=(i?.method??e.task.method??"GET").toUpperCase(),d=i?.headers&&"object"==typeof i.headers?Object.keys(i.headers).length:0,x=m[e.status.toLowerCase()]??"default";return(0,r.jsxs)("div",{className:"rounded-xl border border-slate-800/70 bg-surface-subtle/60 px-5 py-4 space-y-3",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-slate-100",children:[e.task.label," ",(0,r.jsxs)("span",{className:"text-xs font-normal text-slate-500",children:["• ",e.task.project.name," (",s.name,")"]})]}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Started ",new Date(e.startedAt).toLocaleString(),e.completedAt?` • Finished ${new Date(e.completedAt).toLocaleString()}`:""]})]}),r.jsx(n.C,{variant:x,children:e.status.toUpperCase()})]}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 text-xs text-slate-300",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-slate-800/60 bg-slate-900/60 px-4 py-3",children:[r.jsx("p",{className:"font-semibold text-slate-200",children:"Scenario"}),(0,r.jsxs)("p",{className:"mt-1",children:["Mode: ",u(a)]}),(0,r.jsxs)("p",{children:["Total Requests: ",o?.totalRequests??"—"]}),(0,r.jsxs)("p",{children:["Method: ",c]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-slate-800/60 bg-slate-900/60 px-4 py-3",children:[r.jsx("p",{className:"font-semibold text-slate-200",children:"Latency"}),(0,r.jsxs)("p",{className:"mt-1",children:["Avg: ",h(l?.averageMs)]}),(0,r.jsxs)("p",{children:["P95: ",h(l?.p95Ms)]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-slate-800/60 bg-slate-900/60 px-4 py-3",children:[r.jsx("p",{className:"font-semibold text-slate-200",children:"Result"}),(0,r.jsxs)("p",{className:"mt-1",children:["Success: ",o?.successCount??"—"]}),(0,r.jsxs)("p",{children:["Failures: ",o?.failureCount??"—"]}),(0,r.jsxs)("p",{children:["Success rate:"," ","number"==typeof l?.successRate?`${l.successRate.toFixed(2)}%`:"—"]}),(0,r.jsxs)("p",{children:["Headers: ",d]}),(0,r.jsxs)("p",{children:["Payload: ",i?.hasPayload?"Yes":"No"]})]})]}),e.summaryJson?.raw?(0,r.jsxs)("details",{className:"text-[11px] text-slate-400",children:[r.jsx("summary",{className:"cursor-pointer",children:"View raw k6 export"}),r.jsx("pre",{className:"mt-2 max-h-48 overflow-auto rounded-lg border border-slate-800/60 bg-black/40 p-3 text-[10px] text-slate-200",children:JSON.stringify(e.summaryJson.raw,null,2)})]}):null]},e.id)})]})]})]})}},4551:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>i,Zb:()=>l,aY:()=>c,ll:()=>o});var r=t(5036),a=t(2245);function l({className:e,children:s,...t}){return r.jsx("div",{className:(0,a.cn)("rounded-xl border border-slate-800/80 bg-surface-subtle/80 shadow-card backdrop-blur-sm",e),...t,children:s})}function n({className:e,children:s}){return r.jsx("div",{className:(0,a.cn)("border-b border-slate-800/40 px-6 py-4",e),children:s})}function o({className:e,children:s}){return r.jsx("h3",{className:(0,a.cn)("text-lg font-semibold text-slate-100",e),children:s})}function i({className:e,children:s}){return r.jsx("p",{className:(0,a.cn)("text-sm text-slate-400",e),children:s})}function c({className:e,children:s}){return r.jsx("div",{className:(0,a.cn)("px-6 py-5",e),children:s})}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,439,356,630,743],()=>t(5318));module.exports=r})();